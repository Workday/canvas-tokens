import {Markdown, Meta, Unstyled} from '@storybook/blocks';
import {PalettePreview} from '../components/PalettePreview';

<Meta title="Guides/Upgrade Guides/v3 Upgrade Guide " />
<Unstyled>

# Canvas Tokens Web v3.0

We've overhauled our color system to align with Workday's new brand identity, while also making
improvements to our underlying colors to be more functional, accessible, and extensible. These
updates remap our existing brand and system tokens to our new color palettes. We also introduce new
token variants that provide better cover for the use cases of Workday's diverse products.

### OKLCH

Colors are designed using `oklch`, a perceptually uniform color space. `Oklch` ensures that two
colors with the same lightness will appear equal in brightness – a longstanding issue of traditional
color spaces like RGB and HSL.

- More predictable contrast ratios
- Scales well with theming, modes
- Device and gamut independent

You can learn more about `oklch`
[here](https://developer.mozilla.org/en-US/docs/Web/CSS/color_value/oklch).

> **Note:** Switching to `oklch` means that colors will be perceived differently on a tonal scale.

> **Important:** If your application lives within another application that already imports the CSS
> variables (v3 of our tokens), you do not need to import these again. If you need tokens for local
> development, add them via a plugin or directly to the environment but do not ship code to
> production with duplicate token imports. If you have any questions on whether this applies to your
> application, don’t hesitate to reach out to the team in #ask-canvas-kit.

<br />

### New Color Palette

<br />

#### Restructured Base Color Names

To reduce ambiguity over color values, Base colors have been renamed to use common terms (like
`red.600`) that are easier to understand for everyone. Previously, colors in the palette were named
after Jellybean flavors (i.e.ToastedMarshmallow). While fun, understanding which colors these names
represented was often a learning curve - depending on cultural context and personal interpretation.

#### Expanded Tonal Scale

The color scale has been increased from 5 to 13 steps. Steps in the new scale go from 0 (white) to
1000 (black), each step being designed for at least one use case. Colors are designed to feel
perceptually balanced - meaning colors with the same step number (ex. `red.200` and `blue.200`) will
feel similar in brightness and saturation.

#### Accessible Foundation

Colors are built to pass [WCAG 2.1](https://www.w3.org/TR/WCAG21/#contrast-minimum) contrast
guidelines for both text and non-text contrast at defined intervals in the scale. This makes it
simpler to create accessible pairings without needing to reach for a contrast calculator.

<PalettePreview />

<br />

### Brand Tokens Update

Brand tokens have been updated to use the newest color palette, ensuring consistency and improved
accessibility across all Workday products. In addition, the brand token set has been extended to
provide more flexibility and coverage for common use cases.

The following brand tokens have been added:

- `brand.common.alertOuter`
- `brand.action.lighter`
- `brand.action.darker`
- `brand.alert.lighter`
- `brand.error.lighter`
- `brand.success.lighter`
- `brand.primary.lighter`
- `brand.neutral.lighter`

### System Tokens Update

System tokens have been revised to offer improved flexibility and clarity. As part of this update,
many legacy color values have been replaced with new palette colors, expanding the palette to
promote consistency and accessibility throughout the system.

#### Shape

A new shape token, `system.shape.x1-half` (6px), has been added.

#### Color

- `system.color.bg.transparent` has been transformed to group of colors and requires `default` to
  specify color: `system.color.bg.transparent.default`.

The following have been added:

</Unstyled>

<Markdown>
  {`
| Property   | Color Group         | Token Name                           |
| ---------- | ------------------- | ------------------------------------ |
| background | ai (added)          | system.color.bg.ai.default           |
|  |           | system.color.bg.ai.strong            |
|  |           | system.color.bg.ai.stronger          |
|  |           | system.color.bg.ai.strongest         |
|  | caution (extended)  | system.color.bg.caution.softest      |
|  |   | system.color.bg.caution.soft         |
|  | critical (extended) | system.color.bg.critical.softest     |
|  |  | system.color.bg.critical.soft        |
|  | positive (extended) | system.color.bg.positive.softest     |
|  |  | system.color.bg.positive.soft        |
|  | primary (extended)  | system.color.bg.primary.softest      |
|  |   | system.color.bg.primary.softer       |
|  | info (added)        | system.color.bg.info.softest         |
|  |         | system.color.bg.info.softer          |
|  |         | system.color.bg.info.soft            |
|  |         | system.color.bg.info.default         |
|  |         | system.color.bg.info.strong          |
|  |         | system.color.bg.info.stronger        |
|  | transparent (added) | system.color.bg.transparent.default  |
|  |  | system.color.bg.transparent.strong   |
|  |  | system.color.bg.transparent.stronger |
| foreground  | caution (extended)     | system.color.fg.caution.softer         |
|   |      | system.color.fg.caution.soft           |
|   |      | system.color.fg.caution.stronger       |
|   | critical (extended)    | system.color.fg.critical.softer        |
|   |     | system.color.fg.critical.soft          |
|   |     | system.color.fg.critical.strong        |
|   |     | system.color.fg.critical.stronger      |
|   |     | system.color.fg.positive.soft          |
|   |     | system.color.fg.positive.default       |
|   |     | system.color.fg.positive.strong        |
|   |     | system.color.fg.positive.stronger      |
|   | info (added)        | system.color.fg.info.softer            |
|   |         | system.color.fg.info.soft              |
|   |         | system.color.fg.info.default           |
|   |         | system.color.fg.info.strong            |
|   |         | system.color.fg.info.stronger          |
|   | primary (extended)     | system.color.fg.primary.softer         |
|   |      | system.color.fg.primary.soft           |
|   |      | system.color.fg.primary.stronger       |
| border      | ai (added)          | system.color.border.ai                 |
|       | info (added)        | system.color.border.info.default       |
| static      | amber (added)       | system.color.static.amber.softest      |
|       | amber (added)       | system.color.static.amber.softer       |
|       |        | system.color.static.amber.soft         |
|       |        | system.color.static.amber.default      |
|       |        | system.color.static.amber.strong       |
|       |        | system.color.static.amber.stronger     |
|       |        | system.color.static.amber.strongest    |
|       | blue (extended)        | system.color.static.blue.softest       |
|       |        | system.color.static.blue.softer        |
|       |        | system.color.static.blue.stronger      |
|       |        | system.color.static.blue.strongest     |
|       | gray (extended)        | system.color.static.gray.softer        |
|       |         | system.color.static.gray.soft          |
|       |         | system.color.static.gray.strongest     |
|       | green (extended)       | system.color.static.green.softest      |
|       |        | system.color.static.green.softer       |
|       |        | system.color.static.green.stronger     |
|       |        | system.color.static.green.strongest    |
|       | red (extended)         | system.color.static.red.softest        |
|       |          | system.color.static.red.softer         |
|       |          | system.color.static.red.stronger       |
|       |          | system.color.static.red.strongest      |

`}

</Markdown>

<Unstyled>

The following static tokens have been deleted:

- Gold static color group
- Orange static color group

</Unstyled>
